<!doctype html>
<html>
<head>
  <script type="text/javascript" src="lib/jquery-1.7.2.js"></script>
  <script type="text/javascript" src="lib/keyboard.js"></script>
  <script type="text/javascript" src="lib/underscore.js"></script>
  <script type="text/javascript" src="lib/prettify.js"></script>

  <script type="text/javascript" src="src/snake.js"></script>

	<style>
		#board { position: relative; width: 400px; height: 400px; border: outset 2px black; }
	</style>
</head>
<body>
	<div id="board">
	</div>

	<script>
		$(function () {
			var board = $('#board');
			var solid = Snake.snake();

			function drawAt(position) {
				var div = $('<div />').css('background', 'red').css('width', 10).css('height', 10).css('position', 'absolute');
				div.css('top', position.y() * -10).css('left', position.x() * 10);
				board.append(div);
			}

			function gameLoop() {
				board.html('');
				solid.move();
				solid.occupiedPositions().each(function (position) {
					drawAt(position);
				});
			}
			
			KeyboardJS.bind.key('a', function () { solid.turnLeft(); });
			KeyboardJS.bind.key('d', function () { solid.turnRight(); });

			setInterval(gameLoop, 100);
		});
	</script>
</body>
</html>
